openapi: 3.0.0
info:
  title: 'Absolute Secure Access API'
  version: '12.50'
security:
  - basicAuth: [ ]
servers:
  - url: '{server}'
    variables:
      server:
        default: https://api.example.com
paths:
  /WebService/ConnectionStatus:
    parameters: [ ]
    get:
      tags:
        - WebService
      parameters:
        - in: query
          name: deviceId
          required: false
          schema:
            type: string
        - in: query
          name: deviceName
          required: false
          schema:
            type: string
        - in: query
          name: group
          required: false
          schema:
            type: string
        - in: query
          name: startDate
          required: false
          schema:
            type: string
            format: date-time
        - in: query
          name: endDate
          required: false
          schema:
            type: string
            format: date-time
        - in: query
          name: page
          required: false
          schema:
            type: integer
        - in: query
          name: devicesPerPage
          required: false
          schema:
            type: integer
      operationId: getConnectionStatus
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConnectionStatusResponse'
  /WebService/Device:
    parameters: [ ]
    get:
      tags:
        - WebService
      parameters:
        - in: query
          name: name
          required: false
          schema:
            type: string
        - in: query
          name: group
          required: false
          schema:
            type: string
        - in: query
          name: user
          required: false
          schema:
            type: string
        - in: query
          name: state
          required: false
          schema:
            type: string
        - in: query
          name: page
          required: false
          schema:
            type: integer
        - in: query
          name: devicesPerPage
          required: false
          schema:
            type: integer
      operationId: getDevice
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceResponse'
  /WebControl/device:
    get:
      tags:
        - WebControl
      parameters:
        - in: query
          name: name
          schema:
            type: string
        - in: query
          name: group
          schema:
            type: string
      operationId: getDevices
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ControlDeviceResponse'
    put:
      tags:
        - WebControl
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ControlDevice'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ControlDevice'
  /WebControl/device/{id}:
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
    get:
      tags:
        - WebControl
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ControlDevice'
    delete:
      tags:
        - WebControl
      operationId: deleteDevice
      responses:
        200:
          $ref: '#/components/responses/Success'
        404:
          $ref: '#/components/responses/NotFound'
  /WebControl/device/{id}/{action}:
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
      - in: path
        name: action
        required: true
        schema:
          type: string
          enum: [ disconnect, reconnect ]
    put:
      tags:
        - WebControl
      responses:
        200:
          description: Success
  /WebControl/deviceGroup:
    get:
      tags:
        - WebControl
      description: Get Device Groups
      operationId: getDeviceGroups
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceGroupResponse'
    post:
      tags:
        - WebControl
      description: Create a new Device Group
      operationId: createDeviceGroup
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeviceGroup'
      responses:
        200:
          description: Success
    put:
      tags:
        - WebControl
      description: Update a Device Group
      operationId: updateDeviceGroup
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeviceGroup'
      responses:
        200:
          description: Success
  /WebControl/deviceGroup/{name}:
    parameters:
      - in: path
        name: name
        required: true
        schema:
          type: string
    get:
      tags:
        - WebControl
      description: Get a Device Group
      operationId: getDeviceGroup
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceGroup'
        404:
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - WebControl
      description: Delete a Device Group
      operationId: deleteDeviceGroup
      responses:
        200:
          description: Success
        404:
          $ref: '#/components/responses/NotFound'
  /WebControl/hostGroup:
    get:
      operationId: getHostGroups
      tags:
        - WebControl
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HostGroup'
    post:
      operationId: createHostGroup
      tags:
        - WebControl
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HostGroup'
      responses:
        201:
          description: Created
    put:
      operationId: updateHostGroup
      tags:
        - WebControl
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HostGroup'
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HostGroup'
        404:
          $ref: '#/components/responses/NotFound'
  /WebControl/hostGroup/{id}:
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
    get:
      operationId: getHostGroup
      tags:
        - WebControl
      responses:
        200:
          description: Success
    put:
      operationId: updateHostGroupById
      tags:
        - WebControl
      responses:
        200:
          description: Success
    delete:
      operationId: deleteHostGroup
      tags:
        - WebControl
      responses:
        200:
          description: Success
  /WebControl/user:
    parameters:
      - name: name
        in: query
        schema:
          type: string
      - name: group
        in: query
        schema:
          type: string
    get:
      tags:
        - WebControl
      description: Get all users
      operationId: getUsers
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ControlUserResponse'
    post:
      tags:
        - WebControl
      description: Create a user
      operationId: createUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ControlUser'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ControlUser'
    put:
      tags:
        - WebControl
      description: Update a user
      operationId: updateUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ControlUser'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ControlUser'
  /WebControl/user/{domain}/{name}:
    parameters:
      - name: name
        in: path
        required: true
        schema:
          type: string
      - name: domain
        in: path
        required: true
        schema:
          type: string
    get:
      tags:
        - WebControl
      description: Get user by name and domain
      operationId: getUserByDomain
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ControlUser'
        404:
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - WebControl
      description: Delete a user with domain
      operationId: deleteUserByDomain
      responses:
        200:
          $ref: '#/components/responses/Success'
        404:
          $ref: '#/components/responses/NotFound'
  /WebControl/user/{name}:
    parameters:
      - name: name
        in: path
        required: true
        schema:
          type: string
    get:
      tags:
        - WebControl
      description: Get user by name
      operationId: getUserByName
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ControlUser'
        404:
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - WebControl
      description: Delete a user by name
      operationId: deleteUserByName
      responses:
        200:
          $ref: '#/components/responses/Success'
        404:
          $ref: '#/components/responses/NotFound'
  /WebService/NetworkRoaming:
    parameters: [ ]
    get:
      tags:
        - WebService
      parameters:
        - in: query
          name: deviceGroup
          required: false
          schema:
            type: string
        - in: query
          name: userGroup
          required: false
          schema:
            type: string
        - in: query
          name: startDate
          required: false
          schema:
            type: string
        - in: query
          name: endDate
          required: false
          schema:
            type: string
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NetworkRoamingResponse'
      operationId: getNetworkRoaming
  /WebService/NetworkUsage:
    parameters: [ ]
    get:
      tags:
        - WebService
      parameters:
        - in: query
          name: user
          required: false
          schema:
            type: string
        - in: query
          name: userGroup
          required: false
          schema:
            type: string
        - in: query
          name: startDate
          required: false
          schema:
            type: string
        - in: query
          name: endDate
          required: false
          schema:
            type: string
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NetworkUsageResponse'
      operationId: getNetworkUsage
  /WebService/PoolStatus:
    parameters: [ ]
    get:
      tags:
        - WebService
      parameters:
        - in: query
          name: lowBatteryThreshold
          description: The threshold (in terms of percentage) at which a device is considered to be low on batteries. The default is 10.
          required: false
          schema:
            type: integer
            default: 10
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PoolStatusResponse'
      operationId: getPoolStatus
  /WebService/SessionStatus:
    parameters: [ ]
    get:
      tags:
        - WebService
      parameters:
        - in: query
          name: serverName
          required: false
          schema:
            type: string
        - in: query
          name: filterBy
          required: false
          schema:
            type: string
            enum:
              - nacremediate
              - nacwarn
              - onbattery
              - reachable
              - unattended
              - unreachable
              - authmode
              - cpu
              - device
              - lowbattery
              - model
              - os
              - osver
              - pid
              - plat
              - pop
              - user
              - version
              - vip
        - in: query
          name: filterValue
          required: false
          schema:
            type: string
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionStatusResponse'
      operationId: getSessionStatus
  /WebService/User:
    parameters: [ ]
    get:
      tags:
        - WebService
      parameters:
        - in: query
          name: name
          required: false
          schema:
            type: string
        - in: query
          name: group
          required: false
          schema:
            type: string
        - in: query
          name: quarantined
          required: false
          schema:
            type: boolean
        - in: query
          name: page
          required: false
          schema:
            type: integer
        - in: query
          name: usersPerPage
          required: false
          schema:
            type: integer
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
      operationId: getUser
components:
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
  responses:
    Success:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFound:
      description: The specified resource was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
  schemas:
    Address:
      type: object
      properties:
        ip:
          type: string
        port:
          type: string
    ConnectionState:
      type: object
      properties:
        pop:
          type: string
        serverMachineName:
          type: string
          nullable: true
        state:
          type: string
        timestamp:
          type: string
          format: date-time
        userName:
          type: string
          nullable: true
        vip:
          type: string
    ConnectionStatus:
      type: object
      properties:
        connectionState:
          type: array
          items:
            $ref: '#/components/schemas/ConnectionState'
        deviceName:
          type: string
        devicePid:
          type: string
        firstTimestamp:
          type: string
          format: date-time
        lastUser:
          type: string
          nullable: true
    ConnectionStatusResponse:
      type: object
      properties:
        type:
          type: string
        connectionStatus:
          type: array
          items:
            $ref: '#/components/schemas/ConnectionStatus'
        errorMessage:
          type: string
        currentPage:
          type: integer
        totalPages:
          type: integer
    Device:
      type: object
      properties:
        deviceGroup:
          type: string
        disconnectReason:
          type: string
        lastConnect:
          type: string
          format: date-time
          nullable: true
        lastDisconnect:
          type: string
          format: date-time
          nullable: true
        lastUser:
          type: string
        localityVersion:
          type: string
        mobilityVersion:
          type: string
        name:
          type: string
        operatingSystem:
          type: string
        pid:
          type: string
        registered:
          type: string
          format: date-time
    DeviceResponse:
      type: object
      properties:
        type:
          type: string
        currentPage:
          type: integer
        totalPages:
          type: integer
        device:
          type: array
          items:
            $ref: '#/components/schemas/Device'
    DeviceGroup:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        deviceCount:
          type: number
        quarantined:
          type: boolean
    DeviceGroupResponse:
      type: object
      properties:
        deviceGroups:
          type: array
          items:
            $ref: '#/components/schemas/DeviceGroup'
    ControlDevice:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        deviceGroup:
          type: string
        operatingSystem:
          type: string
        registered:
          type: string
          format: date-time
        lastConnect:
          type: string
        staticAddress:
          type: string
        connected:
          type: boolean
        quarantined:
          type: boolean
    ControlDeviceResponse:
      type: object
      properties:
        devices:
          type: array
          items:
            $ref: '#/components/schemas/ControlDevice'
    Error:
      type: object
      properties:
        status:
          type: number
        code:
          type: number
        message:
          type: string
    HostGroup:
      type: object
      properties:
        id:
          type: string
          nullable: true
        name:
          type: string
        description:
          type: string
          nullable: true
        lastModified:
          type: string
          format: date-time
        hosts:
          type: array
          items:
            type: string
    HostGroups:
      type: array
      items:
        $ref: '#/components/schemas/HostGroup'
    NetworkRoaming:
      type: object
      properties:
        deviceName:
          type: string
        devicePid:
          type: string
        roamingCount:
          type: integer
        timestamp:
          type: string
          format: date-time
    NetworkRoamingResponse:
      type: object
      properties:
        type:
          type: string
        networkRoaming:
          type: array
          items:
            $ref: '#/components/schemas/NetworkRoaming'
    NetworkUsage:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        usage:
          type: number
        usedBy:
          type: string
    NetworkUsageResponse:
      type: object
      properties:
        type:
          type: string
        networkUsage:
          type: array
          items:
            $ref: '#/components/schemas/NetworkUsage'
    PoolStatus:
      type: object
      properties:
        batteryPowered:
          type: integer
        connected:
          type: integer
        connectionsLifetime:
          type: integer
        connectionsPeak:
          type: integer
        deviceLicensesAvailable:
          type: integer
        deviceLicensesLimit:
          type: integer
        disconnected:
          type: integer
        lowBatteries:
          type: integer
        NACdisconnected:
          type: integer
        NACquarantined:
          type: integer
        NACremediated:
          type: integer
        NACwarned:
          type: integer
        newDevices:
          type: integer
        newUsers:
          type: integer
        quarantinedDevices:
          type: integer
        quarantinedUsers:
          type: integer
        registered:
          type: integer
        registeredUsers:
          type: integer
        sessions:
          type: integer
        unreachable:
          type: integer
    PoolStatusResponse:
      type: object
      properties:
        type:
          type: string
        poolStatus:
          $ref: '#/components/schemas/PoolStatus'
        serverStatuses:
          type: array
          items:
            $ref: '#/components/schemas/ServerStatus'
    ServerStatus:
      type: object
      properties:
        addresses:
          type: array
          items:
            $ref: '#/components/schemas/Address'
        connectionPeak:
          type: integer
        connections:
          type: integer
        cpu:
          type: string
        name:
          type: string
        network:
          type: string
        nonPaged:
          type: string
        paged:
          type: string
        pid:
          type: string
        status:
          type: string
        uptimeMinutes:
          type: integer
        utilization:
          type: string
        version:
          type: string
    Session:
      type: object
      properties:
        battery:
          type: integer
        bssid:
          type: string
        connectTime:
          type: string
          format: date-time
        cpu:
          type: string
        description:
          type: string
        deviceGroup:
          type: string
        deviceName:
          type: string
        interfaceAddress:
          type: string
        interfaceName:
          type: string
        interfaceSpeed:
          type: string
        interfaceType:
          type: string
        mobilityVersion:
          type: string
        model:
          type: string
          nullable: true
        nacLevel:
          type: string
        nacRuleset:
          type: string
        os:
          type: string
        pid:
          type: string
        plat:
          type: string
        policyRuleset:
          type: string
        popAddress:
          type: string
        powerSource:
          type: string
        serverName:
          type: string
        serverPid:
          type: string
        ssid:
          type: string
        status:
          type: string
        totalBytes:
          type: integer
        userGroup:
          type: string
        userName:
          type: string
        virtualAddress:
          type: string
    SessionStatusResponse:
      type: object
      properties:
        type:
          type: string
        session:
          type: array
          items:
            $ref: '#/components/schemas/Session'
    User:
      type: object
      properties:
        name:
          type: string
        userGroup:
          type: string
        lastDevice:
          type: string
        lastConnect:
          type: string
          format: date-time
        firstLogon:
          type: string
          format: date-time
        staticAddress:
          type: string
          format: ipv4
    UserResponse:
      type: object
      properties:
        type:
          type: string
        user:
          type: array
          items:
            $ref: '#/components/schemas/User'
        currentPage:
          type: integer
        totalPages:
          type: integer
    ControlUser:
      type: object
      properties:
        name:
          type: string
        domain:
          type: string
        username:
          type: string
        userGroup:
          type: string
        firstLogon:
          type: string
        lastLogon:
          type: string
        lastDeviceName:
          type: string
        quarantined:
          type: boolean
    ControlUserResponse:
      type: object
      properties:
        users:
          type: array
          items:
            $ref: '#/components/schemas/ControlUser'

